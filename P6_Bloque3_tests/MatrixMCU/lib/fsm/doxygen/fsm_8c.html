<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FSM: src/fsm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FSM
   </div>
   <div id="projectbrief">Library for implementing Finite State Machines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fsm_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fsm.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library to create Finite State Machines using composition.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fsm_8h_source.html">fsm.h</a>&quot;</code><br />
</div>
<p><a href="fsm_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a201468129b483039afc5a619e2d31097"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a201468129b483039afc5a619e2d31097">__attribute__</a> ((weak))</td></tr>
<tr class="separator:a201468129b483039afc5a619e2d31097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5644fa20e0a98b3d0d8e250744f4603a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a5644fa20e0a98b3d0d8e250744f4603a">fsm_check_transitions</a> (<a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *p_tt)</td></tr>
<tr class="separator:a5644fa20e0a98b3d0d8e250744f4603a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31af9d963fa298cc6f428e8cb5f2dc94"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a31af9d963fa298cc6f428e8cb5f2dc94">fsm_init_no_check</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm, <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *p_tt)</td></tr>
<tr class="separator:a31af9d963fa298cc6f428e8cb5f2dc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005ed7284110b8cb4c90fe927b70f95f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a005ed7284110b8cb4c90fe927b70f95f">fsm_new</a> (<a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *p_tt)</td></tr>
<tr class="memdesc:a005ed7284110b8cb4c90fe927b70f95f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates memory and create a new state machine from a transition table.  <a href="fsm_8c.html#a005ed7284110b8cb4c90fe927b70f95f">More...</a><br /></td></tr>
<tr class="separator:a005ed7284110b8cb4c90fe927b70f95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ab412fe7a2ac8efb84e813d638128c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a42ab412fe7a2ac8efb84e813d638128c">fsm_destroy</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a42ab412fe7a2ac8efb84e813d638128c"><td class="mdescLeft">&#160;</td><td class="mdescRight">It frees the memory previously allocated for the state machine. Once this function is called, the state machine becomes unusable. It is only necessary to call this function if the state machine was previously created by calling the <code>fsm_new</code> function.  <a href="fsm_8c.html#a42ab412fe7a2ac8efb84e813d638128c">More...</a><br /></td></tr>
<tr class="separator:a42ab412fe7a2ac8efb84e813d638128c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac48c33278cb994fd785a7ba88ecc95"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#adac48c33278cb994fd785a7ba88ecc95">fsm_init</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm, <a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *p_tt)</td></tr>
<tr class="memdesc:adac48c33278cb994fd785a7ba88ecc95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new state machine from a table of transitions.  <a href="fsm_8c.html#adac48c33278cb994fd785a7ba88ecc95">More...</a><br /></td></tr>
<tr class="separator:adac48c33278cb994fd785a7ba88ecc95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a172ed4bc371674e6de85e680d733550c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a172ed4bc371674e6de85e680d733550c">fsm_get_state</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a172ed4bc371674e6de85e680d733550c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current state of the state machine.  <a href="fsm_8c.html#a172ed4bc371674e6de85e680d733550c">More...</a><br /></td></tr>
<tr class="separator:a172ed4bc371674e6de85e680d733550c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cfb15d1bf24ba231bef078a07ee26f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a6cfb15d1bf24ba231bef078a07ee26f2">fsm_set_state</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm, int state)</td></tr>
<tr class="memdesc:a6cfb15d1bf24ba231bef078a07ee26f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current state of the state machine.  <a href="fsm_8c.html#a6cfb15d1bf24ba231bef078a07ee26f2">More...</a><br /></td></tr>
<tr class="separator:a6cfb15d1bf24ba231bef078a07ee26f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035fe61c1cb2bd6005a3d003fa19c1c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8c.html#a035fe61c1cb2bd6005a3d003fa19c1c4">fsm_fire</a> (<a class="el" href="structfsm__t.html">fsm_t</a> *p_fsm)</td></tr>
<tr class="memdesc:a035fe61c1cb2bd6005a3d003fa19c1c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the full transition table.  <a href="fsm_8c.html#a035fe61c1cb2bd6005a3d003fa19c1c4">More...</a><br /></td></tr>
<tr class="separator:a035fe61c1cb2bd6005a3d003fa19c1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library to create Finite State Machines using composition. </p>
<p>This library is expected to be used using composition </p><dl class="section author"><dt>Author</dt><dd>Teachers from the Departamento de Ingenier√≠a Electr√≥nica. Original authors: Jos√© M. Moya and Pedro J. Malag√≥n. Latest contributor: Rom√°n C√°rdenas. </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-09-20 </dd></dl>

<p class="definition">Definition in file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a201468129b483039afc5a619e2d31097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a201468129b483039afc5a619e2d31097">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(weak)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00014">14</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a5644fa20e0a98b3d0d8e250744f4603a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5644fa20e0a98b3d0d8e250744f4603a">&#9670;&nbsp;</a></span>fsm_check_transitions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool fsm_check_transitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *&#160;</td>
          <td class="paramname"><em>p_tt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00027">27</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a42ab412fe7a2ac8efb84e813d638128c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ab412fe7a2ac8efb84e813d638128c">&#9670;&nbsp;</a></span>fsm_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It frees the memory previously allocated for the state machine. Once this function is called, the state machine becomes unusable. It is only necessary to call this function if the state machine was previously created by calling the <code>fsm_new</code> function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the memory address where the new state machine is located </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00060">60</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a035fe61c1cb2bd6005a3d003fa19c1c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035fe61c1cb2bd6005a3d003fa19c1c4">&#9670;&nbsp;</a></span>fsm_fire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fsm_fire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the full transition table. </p>
<p>It loops through the transition table and, if an input condition is met, it switches to a new state and executes the corresponding output modification function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the memory address where the new state machine is located </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00101">101</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a172ed4bc371674e6de85e680d733550c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a172ed4bc371674e6de85e680d733550c">&#9670;&nbsp;</a></span>fsm_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fsm_get_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current state of the state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the memory address where the new state machine is located </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Current state of the state machine </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00091">91</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="adac48c33278cb994fd785a7ba88ecc95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac48c33278cb994fd785a7ba88ecc95">&#9670;&nbsp;</a></span>fsm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fsm_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *&#160;</td>
          <td class="paramname"><em>p_tt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new state machine from a table of transitions. </p>
<p>The starting state of the state machine will correspond to the origin state of the first transition found in the transition table. The transition table must end with a null transition {-1, NULL, -1, NULL}. This will allow the state machine to detect that it has reached the end of the table. Unlike <code>fsm_new</code>, this function does not allocate memory for the state machine. Instead, it uses the memory address provided by the user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the memory address where the new state machine is located </td></tr>
    <tr><td class="paramname">p_tt</td><td>Pointer to the state machine transition table </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Indicates if initialization was correct (true) or not (false) </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00065">65</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a31af9d963fa298cc6f428e8cb5f2dc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31af9d963fa298cc6f428e8cb5f2dc94">&#9670;&nbsp;</a></span>fsm_init_no_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fsm_init_no_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *&#160;</td>
          <td class="paramname"><em>p_tt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00041">41</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a005ed7284110b8cb4c90fe927b70f95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005ed7284110b8cb4c90fe927b70f95f">&#9670;&nbsp;</a></span>fsm_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfsm__t.html">fsm_t</a>* fsm_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__trans__t.html">fsm_trans_t</a> *&#160;</td>
          <td class="paramname"><em>p_tt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates memory and create a new state machine from a transition table. </p>
<p>The starting state of the state machine will correspond to the origin state of the first transition found in the transition table. The transition table must end with a null transition {-1, NULL, -1, NULL}. In this way, the state machine will be able to detect that it has reached the end of the transition table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_tt</td><td>Pointer to the state machine transition table </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fsm_t* Pointer to the memory address where the new state machine is located </dd></dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00047">47</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a6cfb15d1bf24ba231bef078a07ee26f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cfb15d1bf24ba231bef078a07ee26f2">&#9670;&nbsp;</a></span>fsm_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_set_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfsm__t.html">fsm_t</a> *&#160;</td>
          <td class="paramname"><em>p_fsm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current state of the state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_fsm</td><td>Pointer to the memory address where the new state machine is located </td></tr>
    <tr><td class="paramname">state</td><td>New state of the state machine </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00096">96</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="fsm_8c.html">fsm.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
